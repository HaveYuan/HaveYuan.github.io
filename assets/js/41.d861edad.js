(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{544:function(t,s,a){"use strict";a.r(s);var n=a(4),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("最近刚好在做vue相关项目，于是想试一下vue-cli3.0，下面是使用后的一些记录，方便以后查看")]),t._v(" "),a("h2",{attrs:{id:"安装vue-cli3-0"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装vue-cli3-0"}},[t._v("#")]),t._v(" 安装vue-cli3.0")]),t._v(" "),a("p",[t._v("vue-cli3.0 的包名称由 vue-cli 改成了 @vue/cli。 如果之前有全局安装了旧版本的 vue-cli (1.x 或 2.x)，需要先通过 npm uninstall vue-cli -g 或 yarn global remove vue-cli 卸载它。这里我用的是yarn。卸载完后用下面的命令全局安装")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("yarn global add @vue/cli\n")])])]),a("h2",{attrs:{id:"创建项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建项目"}},[t._v("#")]),t._v(" 创建项目")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("vue create project-name\n")])])]),a("p",[t._v("输入命令后要让你选择创建方式，default是默认，manully是手动，第一次建议手动创建，可以根据自己的需要来创建，创建完后会让你选择是否此配置，前面那两个就是我之前创建时保存的，下次如果要用的话直接选择就行了。")]),t._v(" "),a("p",[a("img",{attrs:{src:"/blog/vuecli_init/1.webp",alt:"图片"}})]),t._v(" "),a("h2",{attrs:{id:"目录结构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#目录结构"}},[t._v("#")]),t._v(" 目录结构")]),t._v(" "),a("p",[t._v("vue-cli3.0的目录结构相比之前的简洁了很多，去掉了build文件夹和config文件夹，多了public文件夹。")]),t._v(" "),a("p",[t._v("public文件夹里有一个index.html，这是模板文件，默认是index.html，如果你是开发多页面而且有不同模板文件的可以新建多个模板文件。")]),t._v(" "),a("p",[a("img",{attrs:{src:"/blog/vuecli_init/2.webp",alt:"图片"}})]),t._v(" "),a("p",[a("code",[t._v("src")]),t._v("里有"),a("code",[t._v("components")]),t._v("和"),a("code",[t._v("assets")]),t._v("文件夹，"),a("code",[t._v("components")]),t._v("是放自定义组件的，"),a("code",[t._v("assets")]),t._v("是放一些静态资源的，比如图片、样式、js等，你也可以在scr里新建文件夹来单独存放css或js，看你个人习惯。")]),t._v(" "),a("p",[a("code",[t._v("App.vue")]),t._v("和"),a("code",[t._v("main.js")]),t._v("就等于是一个页面了，"),a("code",[t._v("main.js")]),t._v("是入口文件，"),a("code",[t._v("App.vue")]),t._v("是页面文件，一个入口文件对应一个页面文件，如果你有多个页面，可以新建一个"),a("code",[t._v("pages")]),t._v("文件夹，比如下面这种，每一个文件夹对应一个页面，里面分别是入口文件和页面文件，但是要在 "),a("code",[t._v("vue.config.js")]),t._v(" 里配置 "),a("strong",[t._v("pages")])]),t._v(" "),a("p",[t._v("相关配置可以在 "),a("code",[t._v("vue.config.js")]),t._v(" 中配置，具体配置请点击"),a("a",{attrs:{href:"https://cli.vuejs.org/zh/config/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://cli.vuejs.org/zh/config/"),a("OutboundLink")],1),t._v("，这里说下我用到的配置")]),t._v(" "),a("h2",{attrs:{id:"vue-config-js的配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue-config-js的配置"}},[t._v("#")]),t._v(" vue.config.js的配置")]),t._v(" "),a("p",[t._v("在"),a("code",[t._v("src")]),t._v("同级目录下新建"),a("code",[t._v("vue.config.js")]),t._v("文件，内容如下")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  publicPath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  pages"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    index"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// page 的入口")]),t._v("\n      entry"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"src/pages/index/index.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 模板来源")]),t._v("\n      template"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"public/index.html"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在 dist/index.html 的输出")]),t._v("\n      filename"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"index.html"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 当使用 title 选项时，")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// template 中的 title 标签需要是 <title><%= htmlWebpackPlugin.options.title %></title>")]),t._v("\n      title"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"页面标题1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在这个页面中包含的块，默认情况下会包含")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 提取出来的通用 chunk 和 vendor chunk。")]),t._v("\n      chunks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"chunk-vendors"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"chunk-common"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"index"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    index2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      entry"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"src/pages/index2/index2.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n      template"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"public/index.html"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n      filename"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"index2.html"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n      title"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"页面标题2"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n      chunks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"chunk-vendors"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"chunk-common"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"index2"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("ul",[a("li",[a("p",[t._v("publicPath"),a("br"),t._v("\npublicPath定义相对路径，这样在打包后图片路径就不会报错了")])]),t._v(" "),a("li",[a("p",[t._v("pages"),a("br"),t._v("\n页面配置，图中是定义了两个页面共用一个"),a("code",[t._v("index.html")]),t._v("模板")])])]),t._v(" "),a("h2",{attrs:{id:"环境变量与模式的使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#环境变量与模式的使用"}},[t._v("#")]),t._v(" 环境变量与模式的使用")]),t._v(" "),a("p",[a("code",[t._v("vue-cli")]),t._v(" 提供了三种模式，分别是")]),t._v(" "),a("ul",[a("li",[t._v("development 模式用于 "),a("code",[t._v("vue-cli-service serve")])]),t._v(" "),a("li",[t._v("production 模式用于 "),a("code",[t._v("vue-cli-service build 和 vue-cli-service test:e2e")])]),t._v(" "),a("li",[t._v("test 模式用于 "),a("code",[t._v("vue-cli-service test:unit")])])]),t._v(" "),a("p",[t._v("具体介绍请看"),a("a",{attrs:{href:"https://cli.vuejs.org/zh/guide/mode-and-env.html#%E6%A8%A1%E5%BC%8F",target:"_blank",rel:"noopener noreferrer"}},[t._v("这里"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("我在目录下分别创建了三个文件，如下图所示：")]),t._v(" "),a("p",[a("img",{attrs:{src:"/blog/vuecli_init/3.webp",alt:"图片"}})]),t._v(" "),a("p",[a("code",[t._v(".env.development")]),t._v(" 的内容如下：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("NODE_ENV = development\nVUE_APP_NODE_ENV = development\n")])])]),a("p",[a("code",[t._v(".env.qa")]),t._v(" 的内容如下：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("NODE_ENV = production\nVUE_APP_NODE_ENV = qa\noutputDir = 'dist/qa'\n")])])]),a("p",[a("code",[t._v(".env.production")]),t._v(" 的内容如下：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("NODE_ENV = production\nVUE_APP_NODE_ENV = production\noutputDir = 'dist/production'\n")])])]),a("p",[a("code",[t._v("NODE_ENV")]),t._v(" 是环境变量，"),a("code",[t._v("VUE_APP_NODE_ENV")]),t._v(" 是该环境下的模式名称，在项目里使用模式一定要加上 "),a("code",[t._v("VUE_APP_")]),t._v(" 前缀，然后在项目里就可以通过 "),a("code",[t._v("process.env.VUE_APP_NODE_ENV")]),t._v("获取到当前模式了。。")]),t._v(" "),a("p",[t._v("环境变量可以帮助我们在开发时期和正式上线时期使用根据环境不同使用不同的变量，比如在开发时期后端一般会提供测试接口，这时候我们就可以在开发时期根据环境变量使用测试接口，等到了正式上线了打包了使用的就是线上的接口了，当然要提前写好接口配置文件，然后在package.json里配置命令，如下图所示：")]),t._v(" "),a("p",[a("img",{attrs:{src:"/blog/vuecli_init/4.webp",alt:"图片"}})]),t._v(" "),a("p",[t._v("在命令后面加上 "),a("code",[t._v("--mode 模式值")]),t._v(" 就能指定模式打包了")]),t._v(" "),a("h2",{attrs:{id:"最后"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#最后"}},[t._v("#")]),t._v(" 最后")]),t._v(" "),a("p",[t._v("以上就是 "),a("code",[t._v("vue-cli3.0")]),t._v(" 项目基本内容了，还有其它更加高级的内容得多看看文档才行。")]),t._v(" "),a("cheers"),t._v(" "),a("pay")],1)}),[],!1,null,null,null);s.default=e.exports}}]);